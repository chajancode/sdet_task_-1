
# Задание для SDET-практикума <br> от компании SimbirSoft

## Описание проекта

Автоматизированное тестирование UI и REST API веб‑приложения с использованием Selenium, pytest и Allure для отчётности.
Тестирование UI построено по паттерну Page Object Model (POM) для удобства поддержки и масштабирования.
UI тесты написаны для использования веб-приложения через браузер **Google Chrome**.
Тестирование API построено с валидацией данных через библиотеку Pydantic, тестовые данные генерируются автоматически.
Доступно мокирование методов взаимодействия с API.

## Структура проекта

```project-root/
├── api/                              # Взаимодействие с API
│   ├── entity.py                     # Класс с методами взаимодействия с API
├── endpoints/                        # Эндпоинты
│   ├── endpoints.py                  # Список тестируемых эндпоинтов
├── Exceptions/                       # Исключения
│   ├── APIExceptions.py              # Кастомные исключения
├── locators/                         # Локаторы
│   ├── manager_page_locators.py      # CSS-локаторы для UI-тестов
├── models/                           # Pydantic модели
│   ├── create_and_patch_model.py     # Модель данных для методов CREATE, PATCH
│   ├── create_response_model.py      # CSS-локаторы для UI-тестов
│   └── ...  
├── pages/                            # Классы страниц (Page Objects)  
│   ├── base_page.py                  # Базовый класс для всех проверок  
│   ├── add_customer.py               # Проверка добавления клиента  
│   └── ...  
├── config/                           # Конфигурация
│   └── params.py                     # Глобальные параметры (URL)  
├── tests/                            # Тестовые сценарии
│   └── mocks/                        # Сценарии для моков
│       └── api_scenarios.py          # Сценарии для API
│   └── test_api/                     # Тесты API
│       ├── test_create_entity.py     # Тестирование создания сущности
│       └── ...
│   └── test_ui/                      # Тесты UI
│       ├── test_add_customer.py      # Тесты добавления клиента
│       └── ...
├── utils/                            # Вспомогательные функции и классы
│   ├── utils.py                      # Генерация данных для UI тестирования, вспомогательные методы
│   └── data_generators.py            # Генерация данных для тестирования API
└── requirements.txt                  # Список зависимостей
```

## Используемые технологии и версии
- Python: 3.10+
- Selenium WebDriver: 4.38+
- Allure CLI: 2.35+
- pytest: 8.4+
- allure-pytest: 2.15+
- Faker: 37.12+
- pydantic: 2.12+
- factory_boy: 3.3+

## Настройка окружения
**1. Создание виртуального окружения**
```
python -m venv venv
```
**2. Активация виртуального окружения**
```
venv\scripts\activate
```
## Установка зависимостей
После активации виртуального окружения:
```
pip install -r requirements.txt
```
Пример содержимого ```requirements.txt```
```
selenium==4.38.0
pytest==8.4.2
Faker==37.12.0
allure-pytest==2.15.0
```
## Запуск тестов
**Базовая команда**
```
pytest
```
**Запуск с параметрами**  

Запуск конкретного теста:
```
pytest tests/test_add_customer.py::TestAddCustomer::test_add_customer
```
Запуск API-тестов без мокирования:
```
pytest -m "api" --no-api-mocks
```
Запуск и генерация Allure-результатов:
```
pytest --alluredir=./allure-results
```
**Генерация Allure-отчёта**  

Собрать результаты:
```
allure generate allure-results -o allure-report --clean
```
Открыть отчёт в браузере:
```
allure open allure-report
```

## Проект UI тестирования был сделан согласно следующим тест-кейсам:

**ID: 01**

**Предусловия:**

Пользователь находится на странице: "https://www.globalsqa.com/angularJs-protractor/BankingProject/#/manager" Пользователь использует браузер Google Chrome

**Тестовые данные:**

Данные для поля Post Code генерируются случайным образом (Формат: номер из 10 цифр).  
Данные для поля First Name генерируются на основе значения Post Code согласно алгоритму: 
* Значение для поля Post Code разбиваем на двузначные числа (всего 5 чисел) 
* Каждую цифру преобразовываем в букву английского алфавита по порядку от 0 до 25. Если цифра больше 25, то начинаем с 26 как с 0, то есть 0 - "a", 26 - тоже "a", 52 – тоже "a", и т.д. Пример: 0001252667 = "abzap". Поле Last Name заполняется произвольным значением.

**Шаги выполнения:**

* Нажать на кнопку Add Customer
* Сгенерировать число для поля Post Code
* Ввести сгенерированный номер в поле Post Code
* Получить значение для поля First Name согласно алгоритму
* Ввести значение в поле First Name
* Сгенерировать значение для Last Name
* Ввести произвольное значение в поле Last Name
* Нажать кнопку Submit

**Ожидаемый результат:**

Появился алерт с текстом формата "Customer added successfully with customer id :{id записи}" В разделе Customers появилась запись с введёнными данными

**ID: 02**

**Предусловия:**

Пользователь находится на странице: "https://www.globalsqa.com/angularJs-protractor/BankingProject/#/manager" Пользователь использует браузер Google Chrome

**Шаги выполнения:**

* Нажать на кнопку Customers
* Нажать на название столбца First Name

**Ожидаемый результат:**

Произошла сортировка по имени

**ID: 03**

**Предусловия:**

Пользователь находится на странице: "https://www.globalsqa.com/angularJs-protractor/BankingProject/#/manager" Пользователь использует браузер Google Chrome

**Тестовые данные:**

Получить из таблицы Customers список имен. Узнать длину каждого имени, затем найти среднее арифметическое получившихся длин и удалить клиента с тем именем, у которого длина будет ближе к среднему арифметическому.

**Шаги выполнения:**

* Нажать на кнопку Customers
* Получить содержимое таблицы клиентов
* Получить список имён всех клиентов из таблицы
* Получить имя клиента для удаления на основе списка имён
* Ввести значение в поле First Name
* Ввести произвольное значение в поле Last Name
* Нажать кнопку Submit

**Ожидаемый результат:**

Запись удалена
